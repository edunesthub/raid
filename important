# Firebase Tournament Integration Guide

## ğŸ¯ What We've Done

We've replaced all fake tournament data with real Firebase Firestore integration. Here's what's been implemented:

## ğŸ“ New Files Created

### 1. **Tournament Service** (`src/services/tournamentService.js`)
A comprehensive service class that handles all tournament operations:

- âœ… `getAllTournaments()` - Fetch all tournaments with optional filters
- âœ… `getTournamentById()` - Get single tournament details
- âœ… `getFeaturedTournaments()` - Get featured tournaments for homepage
- âœ… `createTournament()` - Create new tournament (for admins)
- âœ… `updateTournament()` - Update tournament details
- âœ… `deleteTournament()` - Delete tournament
- âœ… `joinTournament()` - User joins tournament
- âœ… `leaveTournament()` - User leaves tournament
- âœ… `getUserTournaments()` - Get tournaments user is participating in

### 2. **Tournament Hooks** (`src/hooks/useTournaments.js`)
React hooks for easy data fetching:

- âœ… `useTournaments(options)` - Fetch tournaments with filters
- âœ… `useTournament(id)` - Fetch single tournament with join/leave actions
- âœ… `useFeaturedTournaments(limit)` - Fetch featured tournaments

### 3. **Updated Pages**

#### Home Page (`src/app/page.jsx`)
- Now fetches real tournaments from Firebase
- Shows loading state while fetching
- Displays error messages if fetch fails
- Shows empty state if no tournaments available

#### Tournament Detail Page (`src/app/tournament/[id]/page.jsx`)
- Fetches tournament data from Firebase by ID
- Shows loading spinner while fetching
- Handles join/leave tournament actions
- Shows participant status
- Displays action errors

#### New Tournaments List Page (`src/app/tournaments/page.jsx`)
- Browse all tournaments
- Filter by status (registration-open, upcoming, live, completed)
- Filter by game
- Clear filters functionality
- Shows tournament count

## ğŸ—„ï¸ Firebase Structure

Your Firestore collection should be structured like this:

```
tournaments/
  â””â”€â”€ {tournamentId}/
      â”œâ”€â”€ title: string
      â”œâ”€â”€ game: string
      â”œâ”€â”€ image: string (URL to image)
      â”œâ”€â”€ description: string
      â”œâ”€â”€ entryFee: number
      â”œâ”€â”€ prizePool: number
      â”œâ”€â”€ currency: string (e.g., "GHS")
      â”œâ”€â”€ startDate: string (ISO 8601 format)
      â”œâ”€â”€ endDate: string (ISO 8601 format)
      â”œâ”€â”€ maxPlayers: number
      â”œâ”€â”€ currentPlayers: number
      â”œâ”€â”€ status: string ("registration-open", "upcoming", "live", "completed")
      â”œâ”€â”€ format: string (e.g., "Battle Royale", "5v5")
      â”œâ”€â”€ region: string
      â”œâ”€â”€ participants: array of user IDs
      â”œâ”€â”€ rules: array of strings
      â”œâ”€â”€ requirements: array of strings
      â”œâ”€â”€ prizeDistribution: array of objects
      â”‚   â”œâ”€â”€ rank: string
      â”‚   â””â”€â”€ percentage: number
      â”œâ”€â”€ organizer: string
      â”œâ”€â”€ createdAt: timestamp
      â””â”€â”€ updatedAt: timestamp
```

## ğŸ“ Sample Tournament Document

```json
{
  "title": "CODM Championship 2024",
  "game": "Call of Duty: Mobile",
  "image": "/assets/cod.jpg",
  "description": "The biggest CODM tournament of the year!",
  "entryFee": 25,
  "prizePool": 100,
  "currency": "GHS",
  "startDate": "2025-04-01T10:00:00Z",
  "endDate": "2025-04-15T18:00:00Z",
  "maxPlayers": 100,
  "currentPlayers": 45,
  "status": "registration-open",
  "format": "Battle Royale - Solo",
  "region": "Ghana",
  "participants": ["userId1", "userId2", "userId3"],
  "rules": [
    "Must be ranked Master or higher",
    "Device: Mobile/Tablet only",
    "Must join Discord server"
  ],
  "requirements": [
    "Valid CODM Account",
    "Discord Account",
    "Age 16+"
  ],
  "prizeDistribution": [
    { "rank": "1st Place", "percentage": 50 },
    { "rank": "2nd Place", "percentage": 30 },
    { "rank": "3rd Place", "percentage": 20 }
  ],
  "organizer": "RAID Arena"
}
```

## ğŸš€ How to Use

### Display Tournaments on Homepage
```javascript
import { useFeaturedTournaments } from '@/hooks/useTournaments';

function HomePage() {
  const { tournaments, loading, error } = useFeaturedTournaments(4);
  
  if (loading) return <LoadingSpinner />;
  if (error) return <ErrorMessage error={error} />;
  
  return tournaments.map(t => <TournamentCard tournament={t} />);
}
```

### Show Tournament Details
```javascript
import { useTournament } from '@/hooks/useTournaments';

function TournamentPage({ params }) {
  const { tournament, joinTournament, leaveTournament } = useTournament(params.id);
  
  const handleJoin = async () => {
    await joinTournament(userId);
  };
  
  return <TournamentDetails tournament={tournament} onJoin={handleJoin} />;
}
```

### Filter Tournaments
```javascript
import { useTournaments } from '@/hooks/useTournaments';

function TournamentsPage() {
  const { tournaments } = useTournaments({
    status: 'registration-open',
    game: 'PUBG Mobile',
    orderBy: 'startDate',
    limit: 10
  });
  
  return tournaments.map(t => <TournamentCard tournament={t} />);
}
```

## âœ¨ Features Implemented

1. **Real-time Data** - Fetches live data from Firebase
2. **Loading States** - Shows spinners during data fetch
3. **Error Handling** - Displays user-friendly error messages
4. **Join/Leave** - Users can join and leave tournaments
5. **Filters** - Filter by status and game
6. **Empty States** - Handles no data scenarios gracefully
7. **Participant Tracking** - Tracks who joined tournaments
8. **Automatic Updates** - currentPlayers count updates automatically

## ğŸ”§ Next Steps

1. **Add tournament images to Firebase Storage** instead of using local assets
2. **Create admin panel** to create/edit tournaments
3. **Add payment integration** for entry fees
4. **Implement brackets/matchmaking** system
5. **Add real-time updates** using Firestore listeners
6. **Add notifications** when tournaments start/end

## ğŸ› ï¸ Files to Delete

You can now safely delete:
- `src/data/tournaments.js` (old fake data)
- `src/app/data/tournaments.js` (if exists)

## ğŸ“Œ Important Notes

- Make sure Firebase is properly configured in `.env.local`
- Firestore rules should allow authenticated users to read tournaments
- Only admins should be able to create/edit tournaments
- Tournament images should be uploaded to Firebase Storage for production